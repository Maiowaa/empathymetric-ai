services:
  - type: web
    name: empathymetric-ai
    env: python
    plan: free
    buildCommand: |
      pip install -r requirements.txt
      pip install huggingface-hub
      
      echo "Downloading model from Hugging Face..."
      python3 << PYTHON
from huggingface_hub import snapshot_download
import os

try:
    snapshot_download(
        repo_id="j-hartmann/emotion-english-distilroberta-base",
        local_dir="./model",
        local_dir_use_symlinks=False
    )
    print("✅ Model downloaded successfully")
    print("Files:", os.listdir("./model"))
except Exception as e:
    print(f"❌ Download failed: {e}")
    exit(1)
PYTHON
      
      ls -la model/
      
    startCommand: uvicorn app:app --host 0.0.0.0 --port $PORT
    
    envVars:
      - key: MODEL_PATH
        value: ./model
